{
    "version": "https://jsonfeed.org/version/1",
    "title": "minz的筆記本 • All posts by \"github action\" tag",
    "description": "這是一個分享我學習筆記的空間",
    "home_page_url": "https://blog.minz.li",
    "items": [
        {
            "id": "https://blog.minz.li/shokaX/ShokaX_github_action/",
            "url": "https://blog.minz.li/shokaX/ShokaX_github_action/",
            "title": "ShokaX 使用 GitHub Actions 自動部署到 Github Page",
            "date_published": "2024-08-09T16:00:00.000Z",
            "content_html": "<h1 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h1>\n<ol>\n<li>編輯部落格內容後使用 Git 將更變推送到 Github 私人倉庫</li>\n<li>私人倉庫的 Workflow 會將原始碼 build 成靜態網頁</li>\n<li>將 public 目錄下的檔案(編譯後的靜態網頁)，推送到公開倉庫</li>\n<li>將這個倉庫設定為 GitHub Page</li>\n</ol>\n<p><img loading=\"lazy\" src=\"/images/shokaX/github_action_imagine.webp\" alt=\"\" title=\"流程\" width=\"60%\" /></p>\n<h1 id=\"github-actions-介紹\"><a class=\"anchor\" href=\"#github-actions-介紹\">#</a> GitHub Actions 介紹</h1>\n<p>GitHub Actions 是 GitHub 提供的一項 CI/CD（持續集成和持續部署）服務，讓使用者能夠自動化軟件開發工作流。<br />\n它允許你在特定事件發生時執行定義好的動作，例如程式碼推送、Pull Request 創建、Release 發布等，<br />\n並使用 YAML 文件來定義你的工作流。</p>\n<h1 id=\"github-actions-使用\"><a class=\"anchor\" href=\"#github-actions-使用\">#</a> GitHub Actions 使用</h1>\n<h2 id=\"在-github-setting-產生一個-key\"><a class=\"anchor\" href=\"#在-github-setting-產生一個-key\">#</a> 在 Github Setting 產生一個 Key</h2>\n<ol>\n<li>\n<p>點擊 Developer Settings<br />\n<img loading=\"lazy\" src=\"/images/shokaX/githubActionGenKey.webp\" alt=\"\" title=\"點擊 Developer Settings\" width=\"80%\" /></p>\n</li>\n<li>\n<p>點擊 Generate new token<br />\n<img loading=\"lazy\" src=\"/images/shokaX/githubActionGenKey2.webp\" alt=\"\" title=\"點擊 Generate new token\" width=\"80%\" /></p>\n</li>\n<li>\n<p>權限添加 workflow<br />\n<img loading=\"lazy\" src=\"/images/shokaX/githubActionGenKey3.webp\" alt=\"\" title=\"權限添加 workflow\" width=\"80%\" /></p>\n</li>\n<li>\n<p>回到專案的 repo Setting<br />\n<img loading=\"lazy\" src=\"/images/shokaX/githubActionSecretKey.webp\" alt=\"\" title=\"回到專案的 repo Setting\" width=\"80%\" /></p>\n</li>\n<li>\n<p>Name 填入自定義名稱， secret 填入 第<code>3</code>步產生的 token<br />\n<img loading=\"lazy\" src=\"/images/shokaX/githubActionSecretKey2.webp\" alt=\"\" title=\"Name 填入自定義名稱， secret 填入 第`3`步產生的 token\" width=\"80%\" /></p>\n</li>\n</ol>\n<h2 id=\"workflow-trigger\"><a class=\"anchor\" href=\"#workflow-trigger\">#</a> Workflow Trigger</h2>\n<p>當有新的提交推送到 <code>main</code> 分支時，這個工作流程會被觸發。</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">on</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  push</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    branches</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> main</span></span></code></pre>\n<h2 id=\"jobs\"><a class=\"anchor\" href=\"#jobs\">#</a> Jobs</h2>\n<p>這個工作流程包含一個名為 build-and-deploy 的作業。<br />\n這個作業在最新版本的 Ubuntu 環境中運行，並設置了 20 分鐘的超時限制。</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">jobs</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  build-and-deploy</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    runs-on</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ubuntu-latest</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    timeout-minutes</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 20</span></span></code></pre>\n<h2 id=\"steps\"><a class=\"anchor\" href=\"#steps\">#</a> Steps</h2>\n<ol>\n<li>使用 actions/checkout 來將存儲庫中的所有文件和目錄複製到 GitHub Actions 執行器的工作目錄中。</li>\n</ol>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">-</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Checkout Repository</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  uses</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> actions/checkout@v4</span></span></code></pre>\n<ol start=\"2\">\n<li>設置 Node.js 環境，使用版本 18。</li>\n</ol>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">-</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Set up Node.js</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  uses</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> actions/setup-node@v4</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  with</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    node-version</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 18</span></span></code></pre>\n<ol start=\"3\">\n<li>使用 shokax-can</li>\n</ol>\n<ul>\n<li>可以在安裝其他沒有包含在 shokax-can 的 moudle，例如: <code>hexo-generator-sitemap</code>。</li>\n</ul>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">-</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> shokax-can</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  run</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> |</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    git clone https://github.com/theme-shoka-x/shokax-can --depth=1</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    cd shokax-can</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    npm install -g pnpm</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    pnpm install</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    pnpm install hexo-generator-sitemap</span></span></code></pre>\n<ol start=\"4\">\n<li>將安裝好的 node_modules 複製到原本的工作目錄</li>\n</ol>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">-</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Copy Modules</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  run</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> cp -r shokax-can/node_modules node_modules</span></span></code></pre>\n<ol start=\"5\">\n<li>全局安裝 Hexo CLI。</li>\n</ol>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">-</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Install Hexo CLI</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  run</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> npm install -g hexo-cli</span></span></code></pre>\n<ol start=\"6\">\n<li>替換文件 post.js<br />\n如果對主題原始碼有修改，可以在這邊替換。</li>\n</ol>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">-</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> replace</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  working-directory</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ./</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  run</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> |</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    cp replace/post.js node_modules/hexo-theme-shokax/source/js/_app/page/post.js</span></span></code></pre>\n<ol start=\"7\">\n<li>Build the Site</li>\n</ol>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">-</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> build</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  working-directory</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ./</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  run</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> |</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    hexo generate</span></span></code></pre>\n<ol start=\"8\">\n<li>使用 Algolia 進行搜索索引。它從 GitHub Secrets 中提取 HEXO_ALGOLIA_INDEXING_KEY。</li>\n</ol>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">-</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> algolia</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  working-directory</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ./</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  run</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> |</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    export HEXO_ALGOLIA_INDEXING_KEY=$&#123; &#123; secrets.API_TOKEN_ALGOLIA_INDEXING_KEY &#125;&#125;</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    hexo algolia</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  #                                  ^ 去掉這個空格，因為不能正確渲染2個括號</span></span></code></pre>\n<ol start=\"9\">\n<li>Push to Another Repository<br />\n這一步使用 <a href=\"https://cpina.github.io/push-to-another-repository-docs/\">cpina/github-action-push-to-another-repository</a>，<br />\n將生成的靜態網站文件推送到另一個存儲庫 minz71/minz71.github.io 的 main 分支，以部署到 GitHub Pages。<br />\n並使用 GitHub Secrets 中的 API_TOKEN_GITHUB 來進行身份驗證。</li>\n</ol>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">-</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Pushes to another repository</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  uses</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> cpina/github-action-push-to-another-repository@main</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  env</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    API_TOKEN_GITHUB</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> $&#123; &#123; secrets.API_TOKEN_GITHUB &#125;&#125;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">  #                   ^ 去掉這個空格，因為不能正確渲染2個括號</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  with</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    source-directory</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">./public</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    destination-github-username</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">minz71</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    destination-repository-name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">minz71.github.io</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    user-email</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> XXX@gmail.com</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    target-branch</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> main</span></span></code></pre>\n<h1 id=\"workflows-的完整範例\"><a class=\"anchor\" href=\"#workflows-的完整範例\">#</a> Workflows 的完整範例</h1>\n<ul>\n<li>GitHub Actions 的工作流文件在 <code>.github/workflows</code> 目錄中</li>\n</ul>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yml\"><span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Hexo ShokaX Build and Deploy</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">on</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  push</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    branches</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">jobs</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  build-and-deploy</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    runs-on</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ubuntu-latest</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    timeout-minutes</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 20</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    steps</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Checkout Repository</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        uses</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> actions/checkout@v4</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Set up Node.js</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        uses</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> actions/setup-node@v4</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        with</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          node-version</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 18</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> shokax-can</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        run</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> |</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          git clone https://github.com/theme-shoka-x/shokax-can --depth=1</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          cd shokax-can</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          npm install -g pnpm</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          pnpm install</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          pnpm install hexo-generator-sitemap</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">      </span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Copy Modules</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        run</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> cp -r shokax-can/node_modules node_modules</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">      </span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Install Hexo CLI</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        run</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> npm install -g hexo-cli</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">      # - name: replace</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">      #   working-directory: ./</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">      #   run: |</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">      #     cp replace/post.js node_modules/hexo-theme-shokax/source/js/_app/page/post.js</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">          </span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> build</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        working-directory</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ./</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        run</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> |</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          hexo generate</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> algolia</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        working-directory</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ./</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        run</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> |</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          export HEXO_ALGOLIA_INDEXING_KEY=$&#123; &#123; secrets.API_TOKEN_ALGOLIA_INDEXING_KEY &#125;&#125;</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          hexo algolia</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        #                                    ^ 去掉這個空格，因為不能正確渲染2個括號</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#998418;--shiki-dark:#B8A965\"> name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Pushes to another repository</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        uses</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> cpina/github-action-push-to-another-repository@main</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        env</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          API_TOKEN_GITHUB</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> $&#123; &#123; secrets.API_TOKEN_GITHUB &#125;&#125;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        #                     ^ 去掉這個空格，因為不能正確渲染2個括號</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">        with</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          source-directory</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">./public</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          destination-github-username</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">minz71</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          destination-repository-name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">minz71.github.io</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          user-email</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> xxx@gmail.com</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">          target-branch</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> main</span></span>\n<span class=\"line\"></span></code></pre>\n<h1 id=\"設定github-page\"><a class=\"anchor\" href=\"#設定github-page\">#</a> 設定GitHub Page</h1>\n<ol>\n<li>\n<p>到公開的 Repository &gt; Settings &gt; Page</p>\n</li>\n<li>\n<p>設定 Custom domain (在 DNS 添加 CNAME 紀錄)</p>\n</li>\n</ol>\n",
            "tags": [
                "DevOps",
                "Github Action"
            ]
        }
    ]
}